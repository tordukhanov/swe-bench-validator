{
  "repo": "sympy/sympy",
  "instance_id": "sympy__sympy-13865",
  "base_commit": "9bf73cc2191cce7e3e3e6a9549d408bd1cb2488b",
  "patch": "diff --git a/sympy/solvers/ode.py b/sympy/solvers/ode.py\n--- a/sympy/solvers/ode.py\n+++ b/sympy/solvers/ode.py\n@@ -974,7 +974,7 @@ class in it.  Note that a hint may do this anyway if\n     d = Wild('d', exclude=[df, f(x).diff(x, 2)])\n     e = Wild('e', exclude=[df])\n     k = Wild('k', exclude=[df])\n-    n = Wild('n', exclude=[f(x)])\n+    n = Wild('n', exclude=[x, f(x), df])\n     c1 = Wild('c1', exclude=[x])\n     a2 = Wild('a2', exclude=[x, f(x), df])\n     b2 = Wild('b2', exclude=[x, f(x), df])\n",
  "test_patch": "diff --git a/sympy/solvers/tests/test_ode.py b/sympy/solvers/tests/test_ode.py\n--- a/sympy/solvers/tests/test_ode.py\n+++ b/sympy/solvers/tests/test_ode.py\n@@ -740,6 +740,9 @@ def test_classify_ode():\n          'separable_Integral', '1st_linear_Integral')\n     assert classify_ode(Eq(2*f(x)**3*f(x).diff(x), 0), f(x)) == \\\n         ('separable', '1st_power_series', 'lie_group', 'separable_Integral')\n+    # test issue 13864\n+    assert classify_ode(Eq(diff(f(x), x) - f(x)**x, 0), f(x)) == \\\n+        ('1st_power_series', 'lie_group')\n \n \n def test_classify_ode_ics():\n",
  "problem_statement": "ODE incorrectly classified as Bernoulli\nA bug reported on [Stack Overflow](https://stackoverflow.com/q/48148720)\r\n```\r\nfrom sympy import *\r\nx, y  = symbols(\"x\"), Function(\"y\")\r\ndsolve(diff(y(x),x) - y(x)**x)\r\n```\r\nreturns `Eq(y(x), (C1 - x*(x - 1))**(1/(-x + 1)))`. This is clearly due to [exponent n here](https://github.com/sympy/sympy/blob/master/sympy/solvers/ode.py#L1067)  only excluding f(x); it should also exclude x and dx.\r\n\r\n\n",
  "hints_text": "",
  "created_at": "2018-01-08T15:51:05Z",
  "version": "1.1",
  "FAIL_TO_PASS": "[\"test_homogeneous_function\"]",
  "PASS_TO_PASS": "[\"test_constant_renumber_order_issue_5308\", \"test_linear_coeff_match\"]",
  "environment_setup_commit": "ec9e3c0436fbff934fa84e22bf07f1b3ef5bfac3",
  "_download_metadata": {
    "downloaded_at": "2025-10-07T21:23:31.088638",
    "dataset_name": "swe-bench",
    "split": "test",
    "downloader_version": "0.1.0"
  }
}