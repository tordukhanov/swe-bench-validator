{
  "repo": "sphinx-doc/sphinx",
  "instance_id": "sphinx-doc__sphinx-7440",
  "base_commit": "9bb204dcabe6ba0fc422bf4a45ad0c79c680d90b",
  "patch": "diff --git a/sphinx/domains/std.py b/sphinx/domains/std.py\n--- a/sphinx/domains/std.py\n+++ b/sphinx/domains/std.py\n@@ -305,7 +305,7 @@ def make_glossary_term(env: \"BuildEnvironment\", textnodes: Iterable[Node], index\n         term['ids'].append(node_id)\n \n     std = cast(StandardDomain, env.get_domain('std'))\n-    std.note_object('term', termtext.lower(), node_id, location=term)\n+    std.note_object('term', termtext, node_id, location=term)\n \n     # add an index entry too\n     indexnode = addnodes.index()\n@@ -565,7 +565,7 @@ class StandardDomain(Domain):\n         # links to tokens in grammar productions\n         'token':   TokenXRefRole(),\n         # links to terms in glossary\n-        'term':    XRefRole(lowercase=True, innernodeclass=nodes.inline,\n+        'term':    XRefRole(innernodeclass=nodes.inline,\n                             warn_dangling=True),\n         # links to headings or arbitrary labels\n         'ref':     XRefRole(lowercase=True, innernodeclass=nodes.inline,\n",
  "test_patch": "diff --git a/tests/test_domain_std.py b/tests/test_domain_std.py\n--- a/tests/test_domain_std.py\n+++ b/tests/test_domain_std.py\n@@ -99,7 +99,7 @@ def test_glossary(app):\n     text = (\".. glossary::\\n\"\n             \"\\n\"\n             \"   term1\\n\"\n-            \"   term2\\n\"\n+            \"   TERM2\\n\"\n             \"       description\\n\"\n             \"\\n\"\n             \"   term3 : classifier\\n\"\n@@ -114,7 +114,7 @@ def test_glossary(app):\n     assert_node(doctree, (\n         [glossary, definition_list, ([definition_list_item, ([term, (\"term1\",\n                                                                      index)],\n-                                                             [term, (\"term2\",\n+                                                             [term, (\"TERM2\",\n                                                                      index)],\n                                                              definition)],\n                                      [definition_list_item, ([term, (\"term3\",\n@@ -127,7 +127,7 @@ def test_glossary(app):\n     assert_node(doctree[0][0][0][0][1],\n                 entries=[(\"single\", \"term1\", \"term-term1\", \"main\", None)])\n     assert_node(doctree[0][0][0][1][1],\n-                entries=[(\"single\", \"term2\", \"term-term2\", \"main\", None)])\n+                entries=[(\"single\", \"TERM2\", \"term-TERM2\", \"main\", None)])\n     assert_node(doctree[0][0][0][2],\n                 [definition, nodes.paragraph, \"description\"])\n     assert_node(doctree[0][0][1][0][1],\n@@ -143,7 +143,7 @@ def test_glossary(app):\n     # index\n     objects = list(app.env.get_domain(\"std\").get_objects())\n     assert (\"term1\", \"term1\", \"term\", \"index\", \"term-term1\", -1) in objects\n-    assert (\"term2\", \"term2\", \"term\", \"index\", \"term-term2\", -1) in objects\n+    assert (\"TERM2\", \"TERM2\", \"term\", \"index\", \"term-TERM2\", -1) in objects\n     assert (\"term3\", \"term3\", \"term\", \"index\", \"term-term3\", -1) in objects\n     assert (\"term4\", \"term4\", \"term\", \"index\", \"term-term4\", -1) in objects\n \n",
  "problem_statement": "glossary duplicate term with a different case\n**Describe the bug**\r\n```\r\nWarning, treated as error:\r\ndoc/glossary.rst:243:duplicate term description of mysql, other instance in glossary\r\n```\r\n\r\n**To Reproduce**\r\nSteps to reproduce the behavior:\r\n[.travis.yml#L168](https://github.com/phpmyadmin/phpmyadmin/blob/f7cc383674b7099190771b1db510c62bfbbf89a7/.travis.yml#L168)\r\n```\r\n$ git clone --depth 1 https://github.com/phpmyadmin/phpmyadmin.git\r\n$ cd doc\r\n$ pip install 'Sphinx'\r\n$ make html\r\n```\r\n\r\n**Expected behavior**\r\nMySQL != mysql term right ?\r\n\r\n**Your project**\r\nhttps://github.com/phpmyadmin/phpmyadmin/blame/master/doc/glossary.rst#L234\r\n\r\n\r\n**Environment info**\r\n- OS: Unix\r\n- Python version: 3.6\r\n- Sphinx version: 3.0.0\r\n\r\n**Additional context**\r\nDid occur some hours ago, maybe you just released the version\r\n\r\n- https://travis-ci.org/github/williamdes/phpmyadmintest/jobs/671352365#L328\r\n\r\n\n",
  "hints_text": "Sorry for the inconvenience. Indeed, this must be a bug. I'll take a look this later.",
  "created_at": "2020-04-08T13:46:43Z",
  "version": "3.0",
  "FAIL_TO_PASS": "[\"tests/test_domain_std.py::test_glossary\"]",
  "PASS_TO_PASS": "[\"tests/test_domain_std.py::test_process_doc_handle_figure_caption\", \"tests/test_domain_std.py::test_process_doc_handle_table_title\", \"tests/test_domain_std.py::test_get_full_qualified_name\", \"tests/test_domain_std.py::test_glossary_warning\", \"tests/test_domain_std.py::test_glossary_comment\", \"tests/test_domain_std.py::test_glossary_comment2\", \"tests/test_domain_std.py::test_glossary_sorted\", \"tests/test_domain_std.py::test_glossary_alphanumeric\", \"tests/test_domain_std.py::test_glossary_conflicted_labels\", \"tests/test_domain_std.py::test_cmdoption\", \"tests/test_domain_std.py::test_multiple_cmdoptions\", \"tests/test_domain_std.py::test_disabled_docref\"]",
  "environment_setup_commit": "50d2d289e150cb429de15770bdd48a723de8c45d",
  "_download_metadata": {
    "downloaded_at": "2025-10-07T21:23:31.040776",
    "dataset_name": "swe-bench",
    "split": "test",
    "downloader_version": "0.1.0"
  }
}