{
  "repo": "matplotlib/matplotlib",
  "instance_id": "matplotlib__matplotlib-26532",
  "base_commit": "0849036fd992a2dd133a0cffc3f84f58ccf1840f",
  "patch": "diff --git a/lib/mpl_toolkits/mplot3d/art3d.py b/lib/mpl_toolkits/mplot3d/art3d.py\n--- a/lib/mpl_toolkits/mplot3d/art3d.py\n+++ b/lib/mpl_toolkits/mplot3d/art3d.py\n@@ -905,7 +905,7 @@ def __init__(self, verts, *args, zsort='average', shade=False,\n                 kwargs['edgecolors'] = _shade_colors(\n                     edgecolors, normals, lightsource\n                 )\n-            if facecolors is None and edgecolors in None:\n+            if facecolors is None and edgecolors is None:\n                 raise ValueError(\n                     \"You must provide facecolors, edgecolors, or both for \"\n                     \"shade to work.\")\n",
  "test_patch": "diff --git a/lib/mpl_toolkits/mplot3d/tests/test_axes3d.py b/lib/mpl_toolkits/mplot3d/tests/test_axes3d.py\n--- a/lib/mpl_toolkits/mplot3d/tests/test_axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/tests/test_axes3d.py\n@@ -2260,3 +2260,13 @@ def test_surface3d_zsort_inf():\n \n     ax.plot_surface(x, y, z, cmap='jet')\n     ax.view_init(elev=45, azim=145)\n+\n+\n+def test_Poly3DCollection_init_value_error():\n+    # smoke test to ensure the input check works\n+    # GH#26420\n+    with pytest.raises(ValueError,\n+                       match='You must provide facecolors, edgecolors, '\n+                        'or both for shade to work.'):\n+        poly = np.array([[0, 0, 1], [0, 1, 1], [0, 0, 0]], float)\n+        c = art3d.Poly3DCollection([poly], shade=True)\n",
  "problem_statement": "Typo in Poly3DCollection constructor\nThere is a typo in `Poly3DCollection.__init__()` that causes a `TypeError` exception whenever the function is called with `shade=True`.\r\n\r\nhttps://github.com/matplotlib/matplotlib/blob/f7a8cabc1cf1ac9b35502f08e764d74d07d865ac/lib/mpl_toolkits/mplot3d/art3d.py#L908\r\n\r\n`edgecolors in None` should be `edgecolors is None`\n",
  "hints_text": "want to open a PR to fix that? Also good catch!\nIt looks like we rarely enter this branch - I'm investigating how to trigger the bug.",
  "created_at": "2023-08-15T18:34:48Z",
  "version": "3.7",
  "FAIL_TO_PASS": "[\"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_Poly3DCollection_init_value_error\"]",
  "PASS_TO_PASS": "[\"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invisible_axes[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_grid_off[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invisible_ticks_axis[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axis_positions[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_aspects[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_aspects_adjust_box[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_repr\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_primary_views[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_bar3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_bar3d_colors\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_bar3d_shaded[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_bar3d_notshaded[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_bar3d_lightsource\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contour3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contour3d_extend3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contourf3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contourf3d_fill[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contourf3d_extend[png-both-levels0]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contourf3d_extend[png-min-levels1]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contourf3d_extend[png-max-levels2]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_tricontour[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_contour3d_1d_input\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_lines3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_plot_scalar[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_line_data\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_mixedsubplots[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_tight_layout_text[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_color[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_linewidth[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_linewidth_modification[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_modification[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_sorting[png-True]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter3d_sorting[png-False]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_marker_draw_order_data_reversed[png--50]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_marker_draw_order_data_reversed[png-130]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_marker_draw_order_view_rotated[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_plot_3d_from_2d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_surface3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_surface3d_label_offset_tick_position[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_surface3d_shaded[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_surface3d_masked[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_plot_surface_None_arg[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_surface3d_masked_strides[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_text3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_text3d_modification[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_trisurf3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_trisurf3d_shaded[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_wireframe3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_wireframe3dzerocstride[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_wireframe3dzerorstride[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_wireframe3dzerostrideraises\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_mixedsamplesraises\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_quiver3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_quiver3d_empty[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_quiver3d_masked[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_patch_modification\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_patch_collection_modification[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_poly3dcollection_verts_validation\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_poly3dcollection_closed[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_poly_collection_2d_to_3d_empty\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_poly3dcollection_alpha[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_add_collection3d_zs_array[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_add_collection3d_zs_scalar[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_labelpad[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_cla[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_rotated[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_plotsurface_1d_raises\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_proj_transform\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_proj_axes_cube[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_proj_axes_cube_ortho[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_world\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_autoscale\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[True-x]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[True-y]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[True-z]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[False-x]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[False-y]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[False-z]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[None-x]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[None-y]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_unautoscale[None-z]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_focal_length_checks\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_focal_length[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_ortho[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_axes3d_isometric[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_xlim3d-left-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_xlim3d-left-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_xlim3d-right-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_xlim3d-right-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_ylim3d-bottom-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_ylim3d-bottom-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_ylim3d-top-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_ylim3d-top-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_zlim3d-bottom-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_zlim3d-bottom-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_zlim3d-top-inf]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_invalid_axes_limits[set_zlim3d-top-nan]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_simple[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_edge_style[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_named_colors[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_rgb_data[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_alpha[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_xyz[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::TestVoxels::test_calling_conventions\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_line3d_set_get_data_3d\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_inverted[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_inverted_cla\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_ax3d_tickcolour\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_ticklabel_format[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_quiver3D_smoke[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_minor_ticks[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_errorbar3d_errorevery[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_errorbar3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_stem3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_equal_box_aspect[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_colorbar_pos\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_inverted_zaxis\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_set_zlim\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_shared_view[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_shared_axes_retick\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_pan\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[zoom-1-None-expected0]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[zoom-1-x-expected1]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[zoom-1-y-expected2]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[zoom-3-None-expected3]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[pan-1-None-expected4]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[pan-1-x-expected5]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_toolbar_zoom_pan[pan-1-y-expected6]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scalarmap_update[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_subfigure_simple\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_computed_zorder[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_format_coord\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_get_axis_position\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args0-kwargs0-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args1-kwargs1-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args2-kwargs2-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args3-kwargs3-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args4-kwargs4-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[ValueError-args5-kwargs5-margin\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[TypeError-args6-kwargs6-Cannot\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[TypeError-args7-kwargs7-Cannot\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[TypeError-args8-kwargs8-Cannot\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_margins_errors[TypeError-args9-kwargs9-Must\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_text_3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_draw_single_lines_from_Nx1\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_pathpatch_3d[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter_spiral[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_Poly3DCollection_get_facecolor\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_Poly3DCollection_get_edgecolor\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_view_init_vertical_axis[z-proj_expected0-axis_lines_expected0-tickdirs_expected0]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_view_init_vertical_axis[y-proj_expected1-axis_lines_expected1-tickdirs_expected1]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_view_init_vertical_axis[x-proj_expected2-axis_lines_expected2-tickdirs_expected2]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_arc_pathpatch[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_panecolor_rcparams[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_mutating_input_arrays_y_and_z[png]\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_scatter_masked_color\", \"lib/mpl_toolkits/mplot3d/tests/test_axes3d.py::test_surface3d_zsort_inf[png]\"]",
  "environment_setup_commit": "0849036fd992a2dd133a0cffc3f84f58ccf1840f",
  "_download_metadata": {
    "downloaded_at": "2025-10-07T21:23:30.834256",
    "dataset_name": "swe-bench",
    "split": "test",
    "downloader_version": "0.1.0"
  }
}